import{i as ge,j as je,t as y,b as ue,c as x,g as R,a as g,s as he,n as ze,h as Te}from"../chunks/XiXBTrfF.js";import{i as fe}from"../chunks/CWjMBh7Z.js";import{t as z,C as _e,D as we,X as Be,ah as Ie,O as ye,a7 as Le,ai as De,aj as Ee,I as Re,R as oe,p as me,ak as He,c as r,r as e,s as l,d as T,a as xe,x as Ce,y as ce,z as Me,o as f,q as E,ae as ke,f as t,A as de,al as Ae,$ as Fe}from"../chunks/CWDDWP1o.js";import{i as N}from"../chunks/D3NnPqoM.js";import{e as Oe}from"../chunks/Db-UXjz-.js";import{s as K,t as be,a as Pe,l as Ve,r as qe}from"../chunks/DpvYrElx.js";import{s as Se}from"../chunks/D0pO5FIc.js";import{p as pe}from"../chunks/Df4NbIeR.js";import{b as Ke,S as $e}from"../chunks/DMwUh4dt.js";function Ne(G,L,H=!1,A=!1,s=!1){var u=G,v="";z(()=>{var a=Be;if(v===(v=L()??"")){_e&&we();return}if(a.nodes_start!==null&&(Ie(a.nodes_start,a.nodes_end),a.nodes_start=a.nodes_end=null),v!==""){if(_e){ye.data;for(var n=we(),_=n;n!==null&&(n.nodeType!==8||n.data!=="");)_=n,n=Le(n);if(n===null)throw De(),Ee;ge(ye,_),u=Re(n);return}var o=v+"";H?o=`<svg>${o}</svg>`:A&&(o=`<math>${o}</math>`);var h=je(o);if((H||A)&&(h=oe(h)),ge(oe(h),h.lastChild),H||A)for(;oe(h);)u.before(oe(h));else u.before(h)}})}var Ue=y('<div class="absolute left-0 top-0 bottom-0 w-1 bg-[hsl(var(--primary))] transition-all duration-300"></div>'),We=y('<li role="button" tabindex="0"><div class="flex min-w-0 gap-x-4 flex-1 overflow-hidden"><div class="min-w-0 flex-auto"><div class="text-sm font-semibold truncate group-hover:text-[hsl(var(--primary))] transition-colors duration-200"> </div> <p class="mt-1 text-xs text-[hsl(var(--secondary-foreground))] line-clamp-2"> </p></div></div> <div class="shrink-0 flex gap-2 ml-2"><a class="btn btn-sm btn-secondary"> </a> <a class="btn btn-sm btn-outline-primary" target="_blank" rel="noreferrer"> </a></div> <!></li>');function Xe(G,L){me(L,!1);const[H,A]=he(),s=()=>ue(be,"$t",H);let u=pe(L,"script",8),v=pe(L,"isSelected",8,!1);const a=He();function n(){a("select",u())}function _(c){(c.key==="Enter"||c.key===" ")&&(c.preventDefault(),n())}fe();var o=We(),h=r(o),F=r(h),O=r(F),J=r(O,!0);e(O);var U=l(O,2),Q=r(U,!0);e(U),e(F),e(h);var P=l(h,2),D=r(P),ee=r(D,!0);e(D);var V=l(D,2),d=r(V,!0);e(V),e(P);var b=l(P,2);{var k=c=>{var $=Ue();g(c,$)};N(b,c=>{v()&&c(k)})}e(o),z((c,$,W,q)=>{Se(o,1,`script-item flex items-center justify-between py-4 pl-4 pr-5 text-sm cursor-pointer relative
    ${v()?"bg-[hsl(var(--primary)/0.1)] border-l-4 border-[hsl(var(--primary))] pl-3":"hover:bg-[hsl(var(--secondary)/0.5)] border-l-4 border-transparent"} 
    transition-all duration-200 group`),K(o,"aria-selected",v()),x(J,u().name),x(Q,u().description||""),K(D,"href",`/scripts/${u().id}`),K(D,"aria-label",c),x(ee,$),K(V,"href",u().sourceUrl),K(V,"aria-label",W),x(d,q)},[()=>`${s()("script.details")} - ${u().name}`,()=>s()("script.details"),()=>`${s()("script.source")} - ${u().name}`,()=>s()("script.source")],T),R("click",D,c=>c.stopPropagation()),R("click",V,c=>c.stopPropagation()),R("click",o,n),R("keydown",o,_),g(G,o),xe(),A()}var Ye=y('<div class="text-xs text-[hsl(var(--secondary-foreground))] bg-[hsl(var(--card))] px-2 py-1 rounded-full border border-[hsl(var(--border))]"> </div>'),Ge=y('<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1 opacity-0 animate-fadeIn svelte-1xrmgm8" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg> <span class="opacity-0 animate-fadeIn svelte-1xrmgm8"> </span>',1),Je=y('<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1 opacity-0 animate-fadeIn svelte-1xrmgm8" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 001.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path></svg> <span class="opacity-0 animate-fadeIn svelte-1xrmgm8"> </span>',1),Qe=ze('<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1" viewBox="0 0 20 20" fill="currentColor"><path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"></path><path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"></path></svg> ',1),Ze=y(`<div class="p-4"><div class="flex flex-col sm:flex-row sm:items-center space-y-2 sm:space-y-0 sm:space-x-2"><div class="flex-grow relative"><div class="bg-[hsl(var(--background))] border border-[hsl(var(--border))] rounded-md p-3 font-mono text-sm 
                   whitespace-nowrap overflow-x-auto custom-scrollbar
                   hover:border-[hsl(var(--border)/0.8)] hover:bg-[hsl(var(--background)/0.8)]
                   transition-colors duration-200 relative cursor-pointer svelte-1xrmgm8" role="button" tabindex="0"><span class="mr-2 select-none text-[hsl(var(--secondary-foreground))]">$</span> <span class="select-all"> </span> <div class="absolute inset-0 bg-[hsl(var(--primary)/0.1)] flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity duration-200 rounded-md"><div class="bg-[hsl(var(--secondary))] px-2 py-1 rounded text-xs text-[hsl(var(--secondary-foreground))] shadow-sm"> </div></div></div></div> <button><!></button></div> <div class="mt-3 text-xs text-[hsl(var(--secondary-foreground))] flex items-start"><svg class="h-4 w-4 mr-1 flex-shrink-0 mt-0.5 text-[hsl(var(--info))]" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span><!></span></div></div>`),er=y('<div class="p-8 text-[hsl(var(--secondary-foreground))] italic text-center flex flex-col items-center justify-center"><svg class="h-12 w-12 mb-3 text-[hsl(var(--secondary-foreground)/0.5)]" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"></path></svg> <p> </p></div>'),rr=y('<div class="mb-8 rounded-lg border border-[hsl(var(--border))] bg-[hsl(var(--card))] overflow-hidden shadow-sm transition-all duration-300"><div class="p-4 border-b border-[hsl(var(--border))] bg-[hsl(var(--secondary)/0.5)] flex items-center justify-between"><h2 class="text-lg font-semibold"> </h2> <!></div> <!></div>');function tr(G,L){me(L,!1);const[H,A]=he(),s=()=>ue(be,"$t",H),u=E(),v=E();let a=pe(L,"script",8,null),n=E(!1),_=E(!1),o;async function h(){if(a())try{await navigator.clipboard.writeText(t(v)),f(n,!0),f(_,!1),clearTimeout(o),o=setTimeout(()=>{f(n,!1)},2e3)}catch(d){console.error("复制到剪贴板失败:",d),f(_,!0),clearTimeout(o),o=setTimeout(()=>{f(_,!1)},2e3)}}Ce(()=>()=>{clearTimeout(o)}),ce(()=>(ke(a()),Ke),()=>{f(u,a()?`curl -fsSL ${a().url.startsWith("http")?a().url:`${window.location.origin}/installs/${a().url}`} | bash`:"")}),ce(()=>(ke(a()),t(u)),()=>{var d;f(v,((d=a())==null?void 0:d.command)||t(u))}),Me(),fe();var F=rr(),O=r(F),J=r(O),U=r(J,!0);e(J);var Q=l(J,2);{var P=d=>{var b=Ye(),k=r(b,!0);e(b),z(()=>x(k,a().name)),g(d,b)};N(Q,d=>{a()&&d(P)})}e(O);var D=l(O,2);{var ee=d=>{var b=Ze(),k=r(b),c=r(k),$=r(c),W=l(r($),2),q=r(W,!0);e(W);var re=l(W,2),te=r(re),ae=r(te,!0);e(te),e(re),e($),e(c);var X=l(c,2),le=r(X);{var ie=p=>{var w=Ge(),C=l(de(w),2),Y=r(C,!0);e(C),z(M=>x(Y,M),[()=>s()("install.copied")],T),g(p,w)},ne=(p,w)=>{{var C=M=>{var S=Je(),j=l(de(S),2),I=r(j,!0);e(j),z(Z=>x(I,Z),[()=>s()("install.copyFailed")],T),g(M,S)},Y=M=>{var S=Qe(),j=l(de(S),1,!0);z(I=>x(j,I),[()=>s()("install.copy")],T),g(M,S)};N(p,M=>{t(_)?M(C):M(Y,!1)},w)}};N(le,p=>{t(n)?p(ie):p(ne,!1)})}e(X),e(k);var i=l(k,2),m=l(r(i),2),B=r(m);Ne(B,()=>s()("install.tip",{values:{name:a().name}})),e(m),e(i),e(b),z((p,w,C)=>{K($,"aria-label",p),x(q,t(v)),x(ae,w),Se(X,1,`btn btn-md ${t(n)?"btn-success":t(_)?"btn-error":"btn-primary"}`),K(X,"aria-label",C)},[()=>s()("install.copy"),()=>s()("install.clickToCopy"),()=>t(n)?s()("install.copied"):t(_)?s()("install.copyFailed"):s()("install.copy")],T),R("click",$,h),R("keydown",$,p=>{(p.key==="Enter"||p.key===" ")&&(p.preventDefault(),h())}),R("click",X,h),g(d,b)},V=d=>{var b=er(),k=l(r(b),2),c=r(k,!0);e(k),e(b),z($=>x(c,$),[()=>s()("install.selectScript")],T),g(d,b)};N(D,d=>{a()?d(ee):d(V,!1)})}e(F),z(d=>x(U,d),[()=>s()("install.installCommand")],T),g(G,F),xe(),A()}var ar=y('<meta name="description">'),sr=y('<button class="absolute right-2 text-[hsl(var(--secondary-foreground))] hover:text-[hsl(var(--foreground))] transition-colors" aria-label="Clear search"><svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button>'),or=y('<li class="p-6 text-center text-[hsl(var(--secondary-foreground))]"><div class="flex flex-col items-center justify-center py-4"><svg class="animate-spin h-8 w-8 text-[hsl(var(--primary))] mb-3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> <p> </p></div></li>'),lr=y(`<li class="p-6 text-center text-[hsl(var(--error))]"><div class="flex flex-col items-center justify-center py-4"><svg class="h-8 w-8 mb-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <p> </p> <button class="mt-3 px-4 py-2 bg-[hsl(var(--primary))] text-[hsl(var(--primary-foreground))] rounded-md text-sm font-medium 
                   hover:bg-[hsl(var(--primary-hover))] transition-colors duration-200 
                   focus:outline-none focus-visible:ring-2 focus-visible:ring-[hsl(var(--ring))]">刷新</button></div></li>`),ir=y('<li class="p-6 text-center text-[hsl(var(--secondary-foreground))]"><div class="flex flex-col items-center justify-center py-4"><svg class="h-8 w-8 mb-3 text-[hsl(var(--secondary-foreground)/0.7)]" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <p> </p></div></li>'),nr=y('<div class="max-h-[500px] overflow-auto scrollbar-thin scrollbar-thumb-[hsl(var(--border))] scrollbar-track-transparent"></div>'),vr=y(`<div class="max-w-5xl mx-auto px-6 py-8 lg:px-8"><div class="text-center mb-8"><h1 class="text-4xl font-bold tracking-tight mb-4"> </h1> <p class="text-[hsl(var(--secondary-foreground))] max-w-2xl mx-auto"> </p></div> <!> <div class="flex justify-between items-center mb-4"><h2 class="text-xl font-semibold"> </h2> <div class="relative"><div class="relative flex items-center"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 absolute left-3 text-[hsl(var(--secondary-foreground))]" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg> <input type="text" class="px-3 py-2 pl-10 border border-[hsl(var(--border))] bg-[hsl(var(--card))] text-[hsl(var(--foreground))] rounded-md text-sm 
                focus:outline-none focus-visible:ring-2 focus-visible:ring-[hsl(var(--ring))] focus-visible:border-[hsl(var(--border))]
                hover:border-[hsl(var(--border)/0.8)]
                transition-all duration-200 w-full min-w-[200px]"> <!></div></div></div> <div class="border border-[hsl(var(--border))] rounded-md overflow-hidden bg-[hsl(var(--card))] shadow-sm transition-all duration-200"><ul class="divide-y divide-[hsl(var(--border))]"><!></ul></div></div>`);function gr(G,L){me(L,!1);const[H,A]=he(),s=()=>ue(be,"$t",H),u=E();let v=E([]),a=E(null),n=E(!0),_=E(!1),o=E(""),h;async function F(){f(n,!0),f(_,!1);try{if(f(v,await $e.getScripts()),t(a)){const i=t(a).id,m=t(v).find(B=>B.id===i);f(a,m||(t(v).length>0?t(v)[0]:null))}else t(v).length>0&&f(a,t(v)[0]);f(n,!1)}catch(i){console.error("加载脚本数据失败:",i),f(_,!0),f(n,!1)}}Ce(()=>{F(),h=Ve.subscribe(()=>{F()})}),Ae(()=>{h&&h()});function O(i){f(a,i.detail)}function J(i){f(o,i.target.value)}ce(()=>(t(o),t(v)),()=>{f(u,t(o)?$e.searchScripts(t(v),t(o)):t(v))}),Me(),fe();var U=vr();Te(i=>{var m=ar();z((B,p)=>{Fe.title=`Install Scripts - ${B??""}`,K(m,"content",p)},[()=>s()("home.title"),()=>s()("home.subtitle")],T),g(i,m)});var Q=r(U),P=r(Q),D=r(P,!0);e(P);var ee=l(P,2),V=r(ee,!0);e(ee),e(Q);var d=l(Q,2);tr(d,{get script(){return t(a)}});var b=l(d,2),k=r(b),c=r(k,!0);e(k);var $=l(k,2),W=r($),q=l(r(W),2);qe(q);var re=l(q,2);{var te=i=>{var m=sr();R("click",m,()=>f(o,"")),g(i,m)};N(re,i=>{t(o)&&i(te)})}e(W),e($),e(b);var ae=l(b,2),X=r(ae),le=r(X);{var ie=i=>{var m=or(),B=r(m),p=l(r(B),2),w=r(p,!0);e(p),e(B),e(m),z(C=>x(w,C),[()=>s()("home.loading")],T),g(i,m)},ne=(i,m)=>{{var B=w=>{var C=lr(),Y=r(C),M=l(r(Y),2),S=r(M,!0);e(M);var j=l(M,2);e(Y),e(C),z(I=>x(S,I),[()=>s()("home.loadingError")],T),R("click",j,()=>window.location.reload()),g(w,C)},p=(w,C)=>{{var Y=S=>{var j=ir(),I=r(j),Z=l(r(I),2),ve=r(Z,!0);e(Z),e(I),e(j),z(se=>x(ve,se),[()=>s()("home.noResults")],T),g(S,j)},M=S=>{var j=nr();Oe(j,5,()=>t(u),I=>I.id,(I,Z)=>{const ve=T(()=>{var se;return((se=t(a))==null?void 0:se.id)===t(Z).id});Xe(I,{get script(){return t(Z)},get isSelected(){return t(ve)},$$events:{select:O}})}),e(j),g(S,j)};N(w,S=>{t(u).length===0?S(Y):S(M,!1)},C)}};N(i,w=>{t(_)?w(B):w(p,!1)},m)}};N(le,i=>{t(n)?i(ie):i(ne,!1)})}e(X),e(ae),e(U),z((i,m,B,p)=>{x(D,i),x(V,m),x(c,B),K(q,"placeholder",p),Pe(q,t(o))},[()=>s()("home.title"),()=>s()("home.subtitle"),()=>s()("home.availableScripts"),()=>s()("home.searchPlaceholder")],T),R("input",q,J),g(G,U),xe(),A()}export{gr as component};
